(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{385:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"_1-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置文件"}},[t._v("#")]),t._v(" 1. 配置文件：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v(".env")]),t._v(" 全局默认配置文件，不论什么环境都会加载合并；")]),t._v(" "),s("li",[s("code",[t._v(".env.development")]),t._v(" 开发环境下的配置文件；")]),t._v(" "),s("li",[s("code",[t._v(".env.production")]),t._v(" 生产环境下的配置文件；")])]),t._v(" "),s("h3",{attrs:{id:"_2-命名规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-命名规则"}},[t._v("#")]),t._v(" 2. 命名规则：")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("属性名必须以 VUE_APP_ 头，比如 VUE_APP_XXX，否则不符合命名规则的属性名环境变量无法被 Vue 加载。")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 页面标题")]),t._v("\nVUE_APP_TITLE = 全菜工程师\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生产环境配置")]),t._v("\nENV='production'\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 其他属性")]),t._v("\nVUE_APP_BASE_API = '/prod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("api'\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 此变量无法被加载")]),t._v("\nABC_CC = '111'\n")])])]),s("h3",{attrs:{id:"_3-变量使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-变量使用"}},[t._v("#")]),t._v(" 3. 变量使用：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VUE_APP_BASE_API")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_4-文件加载顺序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-文件加载顺序"}},[t._v("#")]),t._v(" 4. 文件加载顺序：")]),t._v(" "),s("p",[t._v("首先，"),s("code",[t._v("Vue")]),t._v("在启动时，无论是在开发环境还是在生产环境，它始终都会加载"),s("code",[t._v(".env")]),t._v("文件里的内容，然后（划重点）=> "),s("strong",[t._v("根据"),s("code",[t._v("Node")]),t._v("环境变量"),s("code",[t._v("NODE_ENV")]),t._v("的值来选择加载"),s("code",[t._v("development")]),t._v("还是"),s("code",[t._v("production")])]),t._v("。")]),t._v(" "),s("ol",[s("li",[t._v("比如我们平常通过"),s("code",[t._v("npm run serve")]),t._v("启动时，我们本地系统的环境变量"),s("code",[t._v("NODE_ENV")]),t._v("值默认是"),s("code",[t._v("development")]),t._v("，这时就会先后加载"),s("code",[t._v(".env")]),t._v("和"),s("code",[t._v(".env.development")]),t._v("这两个文件。")]),t._v(" "),s("li",[t._v("而当我们运行"),s("code",[t._v("npm run build")]),t._v("构建打包时，"),s("code",[t._v("NODE_ENV")]),t._v("值一般为"),s("code",[t._v("production")]),t._v("，则此时"),s("code",[t._v("Vue")]),t._v("仍会先加载"),s("code",[t._v(".env")]),t._v("文件，然后加载"),s("code",[t._v(".env.production")]),t._v("文件。")])]),t._v(" "),s("p",[t._v("其次，在按顺序加载文件时，"),s("code",[t._v("Vue")]),t._v("会把后一个加载的文件内容和前面加载的文件内容进行比较，"),s("strong",[t._v("如果存在变量名相同，那么它会采用后一个文件里的变量值为变量的最终值")]),t._v("。")]),t._v(" "),s("blockquote",[s("p",[t._v("注意：.env文件无论是开发环境还是生产环境都会加载")])]),t._v(" "),s("h3",{attrs:{id:"_5-自定义配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-自定义配置文件"}},[t._v("#")]),t._v(" 5. 自定义配置文件")]),t._v(" "),s("h4",{attrs:{id:"_1-创建-env-staging文件-测试环境配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建-env-staging文件-测试环境配置"}},[t._v("#")]),t._v(" （1） 创建.env.staging文件（测试环境配置）")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(".env.development\n.env.production\n.env.staging\n")])])]),s("ul",[s("li",[t._v(".env.development（开发环境配置）")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 页面标题")]),t._v("\nVUE_APP_TITLE=全菜工程师\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开发环境配置")]),t._v("\nENV='development'\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 若依管理系统/开发环境")]),t._v("\nVUE_APP_BASE_API='/dev"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("api'\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 路由懒加载")]),t._v("\nVUE_CLI_BABEL_TRANSPILE_MODULES=true\n")])])]),s("ul",[s("li",[t._v(".env.production（生产环境配置）")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 页面标题")]),t._v("\nVUE_APP_TITLE=全菜工程师\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生产环境配置")]),t._v("\nENV='production'\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 若依管理系统/生产环境")]),t._v("\nVUE_APP_BASE_API='/prod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("api'\n\n")])])]),s("ul",[s("li",[t._v(".env.staging（自定义配置）")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 页面标题")]),t._v("\nVUE_APP_TITLE=全菜工程师\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 测试环境配置")]),t._v("\nENV='staging'\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 若依管理系统/测试环境")]),t._v("\nVUE_APP_BASE_API='/stage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("api'\n\nNODE_ENV=production\n")])])]),s("h4",{attrs:{id:"_2-然后在package-json文件中配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-然后在package-json文件中配置"}},[t._v("#")]),t._v(" （2）然后在package.json文件中配置：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v(".....\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-cli-service serve"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build:prod"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-cli-service build"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build:stage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-cli-service build --mode staging"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"preview"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node build/index.js --preview"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint --ext .js,.vue src"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n.....\n")])])]),s("ul",[s("li",[t._v("运行第一个指令写法为"),s("code",[t._v("npm run dev")]),t._v("，实际是运行"),s("code",[t._v("vue-cli-service serve")]),t._v("，先后加载"),s("code",[t._v(".env")]),t._v("和"),s("code",[t._v(".env.development")]),t._v("这两个文件。")]),t._v(" "),s("li",[t._v("第二个"),s("code",[t._v("npm run build:prod")]),t._v("，实际运行"),s("code",[t._v("vue-cli-service build")]),t._v("，先后加载"),s("code",[t._v(".env")]),t._v("和"),s("code",[t._v(".env.production")]),t._v("这两个文件。")]),t._v(" "),s("li",[t._v("第三个"),s("code",[t._v("npm run build:stage")]),t._v("，实际运行"),s("code",[t._v("vue-cli-service build --mode staging")]),t._v("，先后加载"),s("code",[t._v(".env")]),t._v("和"),s("code",[t._v(".env.staging")]),t._v("这两个文件。")])])])}),[],!1,null,null,null);s.default=n.exports}}]);