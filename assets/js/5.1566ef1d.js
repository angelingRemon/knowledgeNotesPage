(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{286:function(t,e,s){},338:function(t,e,s){"use strict";s(286)},344:function(t,e,s){"use strict";s.r(e);s(50),s(11);function o(t,e,s=50,o=3e3){var n=document.querySelectorAll(".global-tip"),i=(new Date).getTime(),r=0==n.length?0:n[n.length-1].getAttribute("data-top"),a=parseInt(r)+(0!=n.length?n[n.length-1].offsetHeight+17:s);let p=document.createElement("div");p.className=`global-tip tip-${e} ${i}`,p.style.top=parseInt(r)+"px",p.setAttribute("data-top",a),"info"==e||1==e?p.innerHTML=`<i class="iconfont icon-info icon"></i><p class="tip-info-content">${t}</p>`:"success"==e||2==e?p.innerHTML=`<i class="iconfont icon-dagouyouquan icon"></i><p class="tip-success-content">${t}</p>`:"danger"==e||3==e?p.innerHTML=`<i class="iconfont icon-cuowu icon"></i><p class="tip-danger-content">${t}</p>`:"warning"!=e&&4!=e||(p.innerHTML=`<i class="iconfont icon-gantanhao icon"></i><p class="tip-warning-content">${t}</p>`),document.body.appendChild(p);let l=document.getElementsByClassName(i)[0];setTimeout(()=>{l.style.top=parseInt(a)+"px",l.style.opacity="1"},10),setTimeout(()=>{l.style.top="0px",l.style.opacity="0";var t=function(t){for(var e=[],s=t;s;s=s.nextSibling)1===s.nodeType&&s!==t&&e.push(s);return e}(l);for(let o=0;o<t.length;o++){var e=t[o],s=parseInt(e.getAttribute("data-top"))-e.offsetHeight-17;e.setAttribute("data-top",s),e.style.top=s+"px"}setTimeout(()=>{l.remove()},500)},o)}var n={data:()=>({username:"",password:"",privateInfo:{username:"",password:"",loginKey:"",expire:"",loginInfo:"",allLoginKey:"kbt"}}),mounted(){document.onkeyup=t=>{13==window.event.keyCode&&this.login()}},methods:{login(){let{privateInfo:t}=this,{username:e,password:s,loginKey:n,expire:i,firstLoginKey:r,loginInfo:a}=this.$themeConfig.privatePage;if(!n&&(n="vdoing_manager"),i=this.getExpire(i),!i&&(i=864e5),this.username&&this.password)if("first"==this.$route.query.verifyMode){t.expire=i,!r&&(r="vdoing_first_login");let p=!1;a&&a.hasOwnProperty(r)&&(p=this.checkLoginInfoAndJump(a[r],r)),p||this.username!=e||this.password!=s?p||(this.password="",o("用户名或者密码错误！请联系博主获取用户名和密码！","danger")):this.storageLocalAndJump(n,!0)}else{if("single"==this.$route.query.verifyMode)try{this.$filterPosts.forEach(e=>{if(e.path==this.$route.query.toPath)throw t.username=e.frontmatter.username,t.password=e.frontmatter.password,t.loginKey=e.frontmatter.permalink,t.expire=this.getExpire(e.frontmatter.expire)||i,t.loginInfo=e.frontmatter.loginInfo,new Error})}catch(t){}let r=!1;t.username||t.password||t.loginInfo||(t.loginKey=this.$route.query.toPath,t.loginInfo=a,!t.expire&&(t.expire=i)),t.loginInfo&&(Array.isArray(t.loginInfo)?r=this.checkLoginInfoAndJump(t.loginInfo):t.loginInfo.hasOwnProperty(this.$route.query.toPath)&&(r=this.checkLoginInfoAndJump(t.loginInfo[this.$route.query.toPath]))),r||(this.username==t.username&&this.password==t.password?this.storageLocalAndJump(this.privateInfo.loginKey,!0):this.username==e&&this.password==s?this.storageLocalAndJump(n,!0):(this.password="",o("用户名或者密码错误！请联系博主获取用户名和密码！","danger")))}else""==this.username&&""!=this.password?o("用户名不能为空！","warning"):""!=this.username&&""==this.password?o("密码不能为空！","warning"):o("您访问的文章是私密文章，请先输入用户名和密码！","info")},checkLoginInfoAndJump(t=this.privateInfo.loginInfo,e=this.privateInfo.loginKey){try{t.forEach(t=>{if(this.username==t.username&&this.password==t.password)throw this.storageLocalAndJump(e,!0),new Error})}catch(t){return!0}return!1},storageLocalAndJump(t=this.privateInfo.loginKey,e=!0){const s=JSON.stringify({username:this.username,password:this.password,time:(new Date).getTime(),expire:this.privateInfo.expire});window.localStorage.setItem(t,s),e&&(o("登录成功，正在跳转 ...","success"),this.$route.query.toPath?this.$router.push({path:this.$route.query.toPath}):this.$router.push({path:"/"}))},getExpire:t=>(t&&(t=-1!==t.indexOf("d")?24*parseInt(t.replace("d",""))*60*60*1e3:-1!==t.indexOf("h")?60*parseInt(t.replace("h",""))*60*1e3:1e3*parseInt(t)),t)}},i=(s(338),s(0)),r=Object(i.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"loginContainer"},[e("img",{staticClass:"logoImg",attrs:{src:"/img/other.png",alt:""}}),t._v(" "),e("div",{staticClass:"login-form"},[e("div",{staticClass:"form-header"},[t._v("用户名")]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"请输入用户名 ..."},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-header"},[t._v("密码")]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"请输入密码 ..."},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"btn-row"},[e("button",{staticClass:"btn",on:{click:t.login}},[t._v("登录")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);